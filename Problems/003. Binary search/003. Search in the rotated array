package com.beginnerdsa.step3._3_binary_search;

/*
we need to search a target in rotated array,

rotated array is array where a pivot index is decided and from that index all the elements are rotated left and
element from 0 till pivot are placed in the end.

eg=  for arr={0,1,4,8,10,12,15,20,25,30};
if pivot is 3 then array becomes,

arr={10,12,15,20,25,30,0,1,4,8}
now we need to search target in rotated array and return the index if found or -1 if not found.


so we need to see some pattern here,
both sequences are increasing in nature, and
we can see in the first sequence 10,12,15,20,25,30
all the numbers are greater than 2nd increasing sequence i.e: 0,1,4,8

so we try to find mid then we check and try to shrink the array,
first we check if element lies in first increasing sequence or second increasing sequence,
so we check element is > first element: if yes then we think that we are in first increasing sequence
                                        if no then we think that we are in second increasing sequence



because both will have different method to find the target.

if we found our element in first increasing sequence:

if we see element > target then we were sure in normal sorted array that now target is in left but now,
we are not sure that if our target is in left only because we have rotated array.
so to confirm if target is in left side or not we check if target is < than first element of array if yes
then we are can say that all the elements between first element and current element including first and current element
are not the target.

because -> current element is > target and target < first element

so we trim left=mid+1;

if we found element in 2nd increasing sequence then we check
if element>target then we can say target should be on left because all the element on the right of element will be greater then target.

and if element == target then we return the mid
 */

public class _03_BS_search_in_rotated_sorted_array {
    public static int searchInRotated(int[] arr,int target){
        int left=0;
        int right=arr.length-1;

        while(left<=right){
            int mid=left+(right-left)/2;
            if(target==arr[mid]){
                return mid;
            }
            if(arr[mid]>arr[0]){
                if(target>arr[mid] || target<arr[0]){
                    left=mid+1;
                }
                else{
                    right=mid-1;
                }
            }
            else{
                if(target<arr[mid] || target >arr[arr.length-1]){
                    right=mid-1;
                }
                else{
                    left=mid+1;
                }

            }
        }
        return -1;
    }
    public static void main(String[] args) {
        int[] arr={10,12,15,20,25,30,0,1,4,8};
        int target=0;

        int ans=searchInRotated(arr,target);
        System.out.println(ans);

    }
}
