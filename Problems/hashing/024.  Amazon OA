package com.beginnerdsa.step3._1_Hashing;

/*

we need to find the number of good subarrays,
a good subarray is that: eg= arr={1,3,2,4}  and k=4 (given)
we took subarray like {2,4} now
sum of element in that subarray i.e 2+4=6
now,

6%k==length of subarray i.e 2
if yes then this is a good subarray, and we count it, if not then just skip it
at last we need to return the count of good subarrays


 */
/*
public class _25_amazon_oa {
    public static void main(String[] args){
        int[] arr={1,3,2,4};
        int k=4;
        int n=arr.length;

        int count=0;
        for(int i=0;i<arr.length;i++){
            int sum=0;
            for(int j=i;j<arr.length;j++){
                sum+=arr[j];
                if(sum%k==j-i+1){
                    count++;
                }
            }
        }
    System.out.println(count);
  }
}
*/
import java.util.HashMap;
import java.util.Map;

public class _25_amazon_oa {
  public static void main(String[] args) {
    int[] arr = {1, 3, 2, 4};
    Map<Integer, Integer> map = new HashMap<>();

    int[] prefix = new int[arr.length];
    prefix[0] = arr[0];
    for (int i = 1; i < arr.length; i++) {
        prefix[i]=prefix[i-1]+arr[i];
    }

    map.put(0,1);
    int count=0;
    for(int j=0;j<prefix.length;j++){
      int rhs=prefix[j]-j;
      count+=map.getOrDefault(rhs, 0);
      map.put(prefix[j-1]-j+1,map.getOrDefault(prefix[j-1]-j+1,0)+1);
    }
    System.out.println(count);
  }
}
